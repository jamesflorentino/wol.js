<!DOCTYPE html>  <html> <head>   <title>keys.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="entity.html">                 entity.js               </a>                                           <a class="source" href="events.html">                 events.js               </a>                                           <a class="source" href="game.html">                 game.js               </a>                                           <a class="source" href="grid.html">                 grid.js               </a>                                           <a class="source" href="keys.html">                 keys.js               </a>                                           <a class="source" href="tile.html">                 tile.js               </a>                                           <a class="source" href="utils.html">                 utils.js               </a>                                           <a class="source" href="wol.html">                 wol.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               keys.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nx">define</span><span class="p">([</span>

       <span class="s1">&#39;wol/wol&#39;</span><span class="p">,</span>
       <span class="s1">&#39;wol/events&#39;</span>

<span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">wol</span><span class="p">,</span> <span class="nx">Events</span><span class="p">)</span> <span class="p">{</span>

    <span class="nx">wol</span><span class="p">.</span><span class="nx">KeyCodes</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">MAC_ENTER</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="nx">BACKSPACE</span><span class="o">:</span> <span class="mi">8</span><span class="p">,</span>
        <span class="nx">TAB</span><span class="o">:</span> <span class="mi">9</span><span class="p">,</span>
        <span class="nx">ENTER</span><span class="o">:</span> <span class="mi">13</span><span class="p">,</span>
        <span class="nx">SHIFT</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span>
        <span class="nx">CTRL</span><span class="o">:</span> <span class="mi">17</span><span class="p">,</span>
        <span class="nx">ALT</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
        <span class="nx">CAPS_LOCK</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span>
        <span class="nx">ESC</span><span class="o">:</span> <span class="mi">27</span><span class="p">,</span>
        <span class="nx">SPACE</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">END</span><span class="o">:</span> <span class="mi">35</span><span class="p">,</span>         <span class="c1">// also NUM_SOUTH_WEST</span>
        <span class="nx">HOME</span><span class="o">:</span> <span class="mi">36</span><span class="p">,</span>        <span class="c1">// also NUM_NORTH_WEST</span>
        <span class="nx">LEFT</span><span class="o">:</span> <span class="mi">37</span><span class="p">,</span>        <span class="c1">// also NUM_WEST</span>
        <span class="nx">UP</span><span class="o">:</span> <span class="mi">38</span><span class="p">,</span>          <span class="c1">// also NUM_NORTH</span>
        <span class="nx">RIGHT</span><span class="o">:</span> <span class="mi">39</span><span class="p">,</span>       <span class="c1">// also NUM_EAST</span>
        <span class="nx">DOWN</span><span class="o">:</span> <span class="mi">40</span><span class="p">,</span>        <span class="c1">// also NUM_SOUTH</span>
        <span class="nx">ZERO</span><span class="o">:</span> <span class="mi">48</span><span class="p">,</span>
        <span class="nx">ONE</span><span class="o">:</span> <span class="mi">49</span><span class="p">,</span>
        <span class="nx">TWO</span><span class="o">:</span> <span class="mi">50</span><span class="p">,</span>
        <span class="nx">THREE</span><span class="o">:</span> <span class="mi">51</span><span class="p">,</span>
        <span class="nx">FOUR</span><span class="o">:</span> <span class="mi">52</span><span class="p">,</span>
        <span class="nx">FIVE</span><span class="o">:</span> <span class="mi">53</span><span class="p">,</span>
        <span class="nx">SIX</span><span class="o">:</span> <span class="mi">54</span><span class="p">,</span>
        <span class="nx">SEVEN</span><span class="o">:</span> <span class="mi">55</span><span class="p">,</span>
        <span class="nx">EIGHT</span><span class="o">:</span> <span class="mi">56</span><span class="p">,</span>
        <span class="nx">NINE</span><span class="o">:</span> <span class="mi">57</span><span class="p">,</span>
        <span class="nx">A</span><span class="o">:</span> <span class="mi">65</span><span class="p">,</span>
        <span class="nx">B</span><span class="o">:</span> <span class="mi">66</span><span class="p">,</span>
        <span class="nx">C</span><span class="o">:</span> <span class="mi">67</span><span class="p">,</span>
        <span class="nx">D</span><span class="o">:</span> <span class="mi">68</span><span class="p">,</span>
        <span class="nx">E</span><span class="o">:</span> <span class="mi">69</span><span class="p">,</span>
        <span class="nx">F</span><span class="o">:</span> <span class="mi">70</span><span class="p">,</span>
        <span class="nx">G</span><span class="o">:</span> <span class="mi">71</span><span class="p">,</span>
        <span class="nx">H</span><span class="o">:</span> <span class="mi">72</span><span class="p">,</span>
        <span class="nx">I</span><span class="o">:</span> <span class="mi">73</span><span class="p">,</span>
        <span class="nx">J</span><span class="o">:</span> <span class="mi">74</span><span class="p">,</span>
        <span class="nx">K</span><span class="o">:</span> <span class="mi">75</span><span class="p">,</span>
        <span class="nx">L</span><span class="o">:</span> <span class="mi">76</span><span class="p">,</span>
        <span class="nx">M</span><span class="o">:</span> <span class="mi">77</span><span class="p">,</span>
        <span class="nx">N</span><span class="o">:</span> <span class="mi">78</span><span class="p">,</span>
        <span class="nx">O</span><span class="o">:</span> <span class="mi">79</span><span class="p">,</span>
        <span class="nx">P</span><span class="o">:</span> <span class="mi">80</span><span class="p">,</span>
        <span class="nx">Q</span><span class="o">:</span> <span class="mi">81</span><span class="p">,</span>
        <span class="nx">R</span><span class="o">:</span> <span class="mi">82</span><span class="p">,</span>
        <span class="nx">S</span><span class="o">:</span> <span class="mi">83</span><span class="p">,</span>
        <span class="nx">T</span><span class="o">:</span> <span class="mi">84</span><span class="p">,</span>
        <span class="nx">U</span><span class="o">:</span> <span class="mi">85</span><span class="p">,</span>
        <span class="nx">V</span><span class="o">:</span> <span class="mi">86</span><span class="p">,</span>
        <span class="nx">W</span><span class="o">:</span> <span class="mi">87</span><span class="p">,</span>
        <span class="nx">X</span><span class="o">:</span> <span class="mi">88</span><span class="p">,</span>
        <span class="nx">Y</span><span class="o">:</span> <span class="mi">89</span><span class="p">,</span>
        <span class="nx">Z</span><span class="o">:</span> <span class="mi">90</span><span class="p">,</span>
        <span class="nx">DASH</span><span class="o">:</span> <span class="mi">189</span><span class="p">,</span>                 <span class="c1">// needs localization</span>
        <span class="nx">EQUALS</span><span class="o">:</span> <span class="mi">187</span><span class="p">,</span>               <span class="c1">// needs localization</span>
        <span class="nx">COMMA</span><span class="o">:</span> <span class="mi">188</span><span class="p">,</span>                <span class="c1">// needs localization</span>
        <span class="nx">PERIOD</span><span class="o">:</span> <span class="mi">190</span><span class="p">,</span>               <span class="c1">// needs localization</span>
        <span class="nx">SLASH</span><span class="o">:</span> <span class="mi">191</span><span class="p">,</span>                <span class="c1">// needs localization</span>
        <span class="nx">APOSTROPHE</span><span class="o">:</span> <span class="mi">192</span><span class="p">,</span>           <span class="c1">// needs localization</span>
        <span class="nx">TILDE</span><span class="o">:</span> <span class="mi">192</span><span class="p">,</span>                <span class="c1">// needs localization</span>
        <span class="nx">SINGLE_QUOTE</span><span class="o">:</span> <span class="mi">222</span><span class="p">,</span>         <span class="c1">// needs localization</span>
        <span class="nx">OPEN_SQUARE_BRACKET</span><span class="o">:</span> <span class="mi">219</span><span class="p">,</span>  <span class="c1">// needs localization</span>
        <span class="nx">BACKSLASH</span><span class="o">:</span> <span class="mi">220</span><span class="p">,</span>            <span class="c1">// needs localization</span>
        <span class="nx">CLOSE_SQUARE_BRACKET</span><span class="o">:</span> <span class="mi">221</span><span class="p">,</span> <span class="c1">// needs localization</span>
        <span class="nx">MAC_FF_META</span><span class="o">:</span> <span class="mi">224</span><span class="p">,</span> <span class="c1">// Firefox (Gecko) fires this for the meta key instead of 91</span>
        <span class="nx">PHANTOM</span><span class="o">:</span> <span class="mi">255</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">events</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Events</span><span class="p">();</span>
    <span class="nx">wol</span><span class="p">.</span><span class="nx">keys</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">on</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">events</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">cb</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">off</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">events</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">cb</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">emit</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">events</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>

    <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
        <span class="nx">wol</span><span class="p">.</span><span class="nx">keys</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="k">return</span> <span class="nx">wol</span><span class="p">.</span><span class="nx">keys</span><span class="p">;</span>


<span class="p">});;</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 